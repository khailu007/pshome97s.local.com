var pin_images=mapfunctions_vars.pin_images,images=jQuery.parseJSON(pin_images),ipad_time=0,infobox_id=0,shape={coord:[1,1,1,38,38,59,59,1],type:"poly"},mcOptions,mcluster,clusterStyles,pin_hover_storage,first_time_wpestate_show_inpage_ajax_half=0,panorama,infoBox_sh=null,poi_marker_array=[],poi_type="",placeCircle="",initialGeop=0,heading=0,width_browser=null,infobox_width=null,wraper_height=null,info_image=null,vertical_pan=-190,vertical_off=150,curent_gview_lat=jQuery("#gmap_wrapper").attr("data-cur_lat"),curent_gview_long=jQuery("#gmap_wrapper").attr("data-cur_long"),bounds_list,circleLayer="";function wpestate_agency_map_function(){"use strict";var curent_gview_lat=jQuery("#agency_map").attr("data-cur_lat"),curent_gview_long=jQuery("#agency_map").attr("data-cur_long");if(1==mapfunctions_vars.geolocation_type){var mapOptions_intern={flat:!1,noClear:!1,zoom:15,scrollwheel:!1,draggable:!0,center:new google.maps.LatLng(curent_gview_lat,curent_gview_long),streetViewControl:!1,disableDefaultUI:!0,mapTypeId:mapfunctions_vars.type.toLowerCase(),gestureHandling:"cooperative"},map_agency=new google.maps.Map(document.getElementById("agency_map"),mapOptions_intern);if(""!==mapfunctions_vars.map_style){var styles=JSON.parse(mapfunctions_vars.map_style);map_agency.setOptions({styles:styles})}google.maps.visualRefresh=!0,google.maps.event.trigger(map_agency,"resize");var myLatLng=new google.maps.LatLng(curent_gview_lat,curent_gview_long),marker=new google.maps.Marker({position:myLatLng,map:map_agency,icon:wpesate_custompin_agency(),shape:shape,title:"we are here",zIndex:1,infoWindowIndex:0})}else wpresidence_agency_dev_map(curent_gview_lat,curent_gview_long,"agency_map")}function wpresidence_agency_dev_map(latitude,longitude,map_name){"use strict";var mapCenter=L.latLng(latitude,longitude),map=L.map(map_name,{center:mapCenter,zoom:7}),tileLayer=wpresidence_open_stret_tile_details();map.addLayer(tileLayer);var markerCenter=L.latLng(latitude,longitude),markerImage={iconUrl:images.single_pin,iconSize:[44,50],iconAnchor:[20,50],popupAnchor:[1,-50]},markerOptions={riseOnHover:!0},propertyMarker;markerOptions.icon=L.icon(markerImage),L.marker(markerCenter,markerOptions).addTo(map)}function wpesate_custompin_agency(){"use strict";var image;return{url:images.single_pin,size:new google.maps.Size(59,59),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,59)}}function wpestate_map_shortcode_function(){"use strict";var selected_id=parseInt(jQuery("#googleMap_shortcode").attr("data-post_id"),10),curent_gview_lat=jQuery("#googleMap_shortcode").attr("data-cur_lat"),curent_gview_long=jQuery("#googleMap_shortcode").attr("data-cur_long"),zoom,map2="",gmarkers_sh=[];"undefined"==typeof googlecode_property_vars?(zoom=5,heading=0,jQuery("#modal_property_maps").length>0?(zoom=jQuery("#googleMap_shortcode").attr("data-prop-zoom"),heading=0):(zoom=5,heading=0)):(zoom=googlecode_property_vars.page_custom_zoom,heading=parseInt(googlecode_property_vars.camera_angle));var i=1,id=selected_id,lat=curent_gview_lat,lng=curent_gview_long,title=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-title")),pin=jQuery("#googleMap_shortcode").attr("data-pin"),counter=1,image=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-thumb")),price=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-price")),single_first_type=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-type")),single_first_action=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-action")),link=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-prop_url")),city="",area="",rooms=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-rooms")),baths=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-bathrooms")),size=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-size")),single_first_type_name=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-type")),single_first_action_name=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-action")),agent_id="",county_state="",price_pin=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-pin_price")),cleanprice=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-clean_price"));if(2==wp_estate_kind_of_map){var mapCenter=L.latLng(curent_gview_lat,curent_gview_long);map2=L.map("googleMap_shortcode",{center:mapCenter,zoom:zoom}).on("load",(function(e){jQuery("#gmap-loading").remove()})),wpresidence_leaflet_initialize_map_common(map2),wpestate_createMarker_sh_leaflet(price_pin,infoBox_sh,gmarkers_sh,map2,"",size,1,id,lat,lng,pin,title,1,image,price,single_first_type,single_first_action,link,"","",rooms,baths,cleanprice,single_first_type_name,single_first_action_name)}else if(jQuery("#googleMap_shortcode").length>0){var mapOptions_intern={flat:!1,noClear:!1,zoom:parseInt(zoom),scrollwheel:!1,draggable:!0,center:new google.maps.LatLng(curent_gview_lat,curent_gview_long),streetViewControl:!1,disableDefaultUI:!0,mapTypeId:mapfunctions_vars.type.toLowerCase(),gestureHandling:"cooperative"};map2=new google.maps.Map(document.getElementById("googleMap_shortcode"),mapOptions_intern),google.maps.visualRefresh=!0,google.maps.event.trigger(map2,"resize"),width_browser=jQuery(window).width(),infobox_width=700,vertical_pan=-215,width_browser<900&&(infobox_width=500),width_browser<600&&(infobox_width=400),width_browser<400&&(infobox_width=200);var boxText,myOptions={content:document.createElement("div"),disableAutoPan:!0,maxWidth:infobox_width,boxClass:"mybox",zIndex:null,closeBoxMargin:"-13px 0px 0px 0px",closeBoxURL:"",infoBoxClearance:new google.maps.Size(1,1),isHidden:!1,pane:"floatPane",enableEventPropagation:!0};if(infoBox_sh=new InfoBox(myOptions),""!==mapfunctions_vars.map_style){var styles=JSON.parse(mapfunctions_vars.map_style);map2.setOptions({styles:styles})}wpestate_createMarker_sh(price_pin,infoBox_sh,gmarkers_sh,map2,"",size,1,id,lat,lng,pin,title,1,image,price,single_first_type,single_first_action,link,"","",rooms,baths,cleanprice,single_first_type_name,single_first_action_name);var viewPlace=new google.maps.LatLng(curent_gview_lat,curent_gview_long);if(void 0===panorama_sh)var panorama_sh;(panorama_sh=map2.getStreetView()).setPosition(viewPlace),panorama_sh.setPov({heading:heading,pitch:0}),jQuery("#slider_enable_street_sh").on("click",(function(){var cur_lat=jQuery("#googleMap_shortcode").attr("data-cur_lat"),cur_long=jQuery("#googleMap_shortcode").attr("data-cur_long"),myLatLng=new google.maps.LatLng(cur_lat,cur_long);panorama_sh.setPosition(myLatLng),panorama_sh.setVisible(!0),jQuery("#gmapzoomminus_sh,#gmapzoomplus_sh,#slider_enable_street_sh").hide()})),google.maps.event.addListener(panorama_sh,"closeclick",(function(){jQuery("#gmapzoomminus_sh,#gmapzoomplus_sh,#slider_enable_street_sh").show()})),mapfunctions_vars.hidden_map&&(google.maps.event.trigger(gmarkers_sh[0],"click"),setTimeout((function(){google.maps.event.trigger(map2,"resize"),map2.setCenter(gmarkers_sh[0].position)}),300)),wpestate_initialize_poi(map2,2)}document.getElementById("gmapzoomplus_sh")&&jQuery("#gmapzoomplus_sh").on("click",(function(){var current=parseInt(map2.getZoom(),10);++current>20&&(current=20),map2.setZoom(current)})),document.getElementById("gmapzoomminus_sh")&&jQuery("#gmapzoomminus_sh").on("click",(function(){var current=parseInt(map2.getZoom(),10);--current<0&&(current=0),map2.setZoom(current)})),2==wp_estate_kind_of_map?setTimeout((function(){map2.invalidateSize()}),1e3):setTimeout((function(){google.maps.event.trigger(map2,"resize")}),1e3),jQuery(".shtabmap,.shacctab").on("click",(function(event){2==wp_estate_kind_of_map?setTimeout((function(){map2.invalidateSize()}),100):setTimeout((function(){google.maps.event.trigger(map2,"resize")}),100)}))}function wpestate_createMarker_sh_leaflet(pin_price,infoBox_sh,gmarkers_sh,map2,county_state,size,i,id,lat,lng,pin,title,counter,image,price,single_first_type,single_first_action,link,city,area,rooms,baths,cleanprice,single_first_type_name,single_first_action_name){"use strict";var infoboxWrapper=document.createElement("div");infoboxWrapper.className="leafinfobox-wrapper";var infobox="",poss=0,infobox_class=" price_infobox ";"yes"===mapfunctions_vars.useprice&&(infobox_class=" openstreet_map_price_infobox ");var info_image="";info_image=""===image?mapfunctions_vars.path+"/idxdefault.jpg":image;var category=decodeURIComponent(single_first_type.replace(/-/g," ")),action=decodeURIComponent(single_first_action.replace(/-/g," ")),category_name=decodeURIComponent(single_first_type_name.replace(/-/g," ")),action_name=decodeURIComponent(single_first_action_name.replace(/-/g," ")),in_type=mapfunctions_vars.in_text,infoguest,inforooms,infobaths,inforooms,infosize,title;""!==category&&""!==action||(in_type=" "),in_type=" / ",infobaths=""!=baths&&0!=baths?'<span id="infobath">'+baths+" "+mapfunctions_vars.ba+"</span>":"",inforooms=""!=rooms&&0!=rooms?'<span id="inforoom">'+rooms+" "+mapfunctions_vars.bd+"</span>":"",infosize=""!=size?'<span id="infosize">'+size+"</span>":"",(title=title.substr(0,30)).length>30&&(title+="..."),infobox+=wpestate_generate_infobox_leaflet(infobox_class,title,link,info_image,price,cleanprice,infosize,infobaths,inforooms);var markerOptions={riseOnHover:!0},markerCenter=L.latLng(lat,lng),propertyMarker="";if(mapfunctions_vars.hidden_map)if("yes"===mapfunctions_vars.useprice){var price_pin_class,pin_price_marker='<div class="'+("wpestate_marker openstreet_price_marker "+wpestate_makeSafeForCSS(single_first_type_name.trim())+" "+wpestate_makeSafeForCSS(single_first_action_name.trim()))+'">';void 0!==price&&("no"===mapfunctions_vars.use_price_pins_full_price?pin_price_marker+='<div class="interior_pin_price">'+pin_price+"</div>":pin_price_marker+='<div class="interior_pin_price">'+price+"</div>"),pin_price_marker+="</div>";var myIcon=L.divIcon({className:"someclass",iconSize:new L.Point(0,0),html:pin_price_marker});propertyMarker=L.marker(markerCenter,{icon:myIcon})}else{var markerImage={iconUrl:wprentals_custompin_leaflet(pin),iconSize:[44,50],iconAnchor:[20,50],popupAnchor:[1,-50]};markerOptions.icon=L.icon(markerImage),propertyMarker=L.marker(markerCenter,markerOptions)}else propertyMarker=L.circle(markerCenter,{color:"#0073e1",fillColor:"#0073e1",fillOpacity:.4,strokeWeight:.2,radius:120});propertyMarker.idul=id,propertyMarker.pin=pin,propertyMarker.addTo(map2),gmarkers_sh.push(propertyMarker),void 0!==bounds_list?bounds_list.extend(propertyMarker.getLatLng()):bounds_list=L.latLngBounds(propertyMarker.getLatLng(),propertyMarker.getLatLng()),infoboxWrapper.innerHTML=infobox,propertyMarker.bindPopup(infobox),mapfunctions_vars.hidden_map&&propertyMarker.fire("click").openPopup()}function wpestate_createMarker_sh(pin_price,infoBox_sh,gmarkers_sh,map2,county_state,size,i,id,lat,lng,pin,title,counter,image,price,single_first_type,single_first_action,link,city,area,rooms,baths,cleanprice,single_first_type_name,single_first_action_name){"use strict";var new_title="",myLatLng=new google.maps.LatLng(lat,lng),poss=0,infobox_class=" price_infobox ";if("yes"===mapfunctions_vars.useprice&&mapfunctions_vars.hidden_map){myLatLng=new google.maps.LatLng(lat,lng);var Titlex=jQuery("<textarea />").html(title).text(),infoWindowIndex=999;poss=11;var price2=price,my_custom_curr_pos=parseFloat(wpestate_getCookie_map("my_custom_curr_pos"));if(!isNaN(my_custom_curr_pos)&&-1!==my_custom_curr_pos){var converted_price=wpestate_get_price_currency(cleanprice,cleanprice),testRE=price.match("</span>(.*)<span class=");null!==testRE&&(price2=price.replace(testRE[1],converted_price))}marker=new WpstateMarker(poss,myLatLng,map2,Titlex,counter,image,id,price2,pin_price,single_first_type,single_first_action,link,i,rooms,baths,cleanprice,size,single_first_type_name,single_first_action_name,pin,999)}else{infobox_class=" classic_info ";var marker=new google.maps.Marker({position:myLatLng,map:map2,icon:wpestate_custompin(pin),shape:shape,title:title,zIndex:counter,image:image,idul:id,price:price,category:single_first_type,action:single_first_action,link:link,city:city,area:area,infoWindowIndex:i,rooms:rooms,baths:baths,cleanprice:cleanprice,size:size,county_state:county_state,category_name:single_first_type_name,action_name:single_first_action_name})}gmarkers_sh.push(marker),google.maps.event.addListener(marker,"click",(function(){info_image=""===this.image?'<img src="'+mapfunctions_vars.path+'/idxdefault.jpg"  />':this.image;var category=decodeURIComponent(this.category.replace(/-/g," ")),action=decodeURIComponent(this.action.replace(/-/g," ")),category_name=decodeURIComponent(this.category_name.replace(/-/g," ")),action_name=decodeURIComponent(this.action_name.replace(/-/g," ")),in_type=mapfunctions_vars.in_text,infobaths,inforooms,infosize;""!==category&&""!==action||(in_type=" "),infobaths=""!=this.baths&&0!=this.baths?'<span id="infobath">'+this.baths+" "+mapfunctions_vars.ba+"</span>":"",inforooms=""!=this.rooms&&0!=this.rooms?'<span id="inforoom">'+this.rooms+" "+mapfunctions_vars.bd+"</span>":"",""!=this.size?(infosize='<span id="infosize">'+this.size,infosize+="</span>"):infosize="";var title=this.title.substr(0,30);this.title.length>30&&(title+="..."),infoBox_sh.setContent(wpestate_generate_infobox_sh(infobox_class,title,link,info_image,price,cleanprice,infosize,infobaths,inforooms)),infoBox_sh.open(map2,this),map2.setCenter(this.position),"no"===control_vars.show_adv_search_map_close&&($(".search_wrapper").addClass("adv1_close"),wpestate_adv_search_click()),wpestate_close_adv_search()}))}function wpestate_change_map_type(map_type){"use strict";"map-view-roadmap"===map_type?map.setMapTypeId(google.maps.MapTypeId.ROADMAP):"map-view-satellite"===map_type?map.setMapTypeId(google.maps.MapTypeId.SATELLITE):"map-view-hybrid"===map_type?map.setMapTypeId(google.maps.MapTypeId.HYBRID):"map-view-terrain"===map_type&&map.setMapTypeId(google.maps.MapTypeId.TERRAIN)}function wpestate_setMarkers(map,locations,with_bound){"use strict";var map_open,myLatLng,selected_id=parseInt(jQuery("#gmap_wrapper").attr("data-post_id"));isNaN(selected_id)&&(selected_id=parseInt(jQuery("#googleMapSlider").attr("data-post_id"),10));var open_height=parseInt(mapfunctions_vars.open_height,10),closed_height=parseInt(mapfunctions_vars.closed_height,10);width_browser=jQuery(window).width(),infobox_width=700,vertical_pan=-215,width_browser<900&&(infobox_width=500),width_browser<600&&(infobox_width=400),width_browser<400&&(infobox_width=200),bounds=new google.maps.LatLngBounds;for(var i=0;i<locations.length;i++){var beach=locations[i],id=beach[10],lat=beach[1],lng=beach[2],title=decodeURIComponent(beach[0]),pin=beach[8],counter=beach[3],image=decodeURIComponent(beach[4]),price=decodeURIComponent(beach[5]),single_first_type=decodeURIComponent(beach[6]),single_first_action=decodeURIComponent(beach[7]),link=decodeURIComponent(beach[9]),cleanprice=beach[11],rooms=beach[12],baths=beach[13],size=beach[14],single_first_type_name=decodeURIComponent(beach[15]),single_first_action_name=decodeURIComponent(beach[16]),pin_price;wpestate_createMarker(decodeURIComponent(beach[17]),size,i,id,lat,lng,pin,title,counter,image,price,single_first_type,single_first_action,link,rooms,baths,cleanprice,single_first_type_name,single_first_action_name),selected_id===id&&(found_id=i)}wpestate_map_cluster(),jQuery("body").hasClass("single-estate_property")||(oms=new OverlappingMarkerSpiderfier(map,{markersWontMove:!0,markersWontHide:!0,keepSpiderfied:!0,legWeight:2}),wpestate_setOms(gmarkers)),1===with_bound&&(bounds.isEmpty()?wpestate_fit_bounds_nolsit():wpestate_fit_bounds(bounds)),"0"!==mapfunctions_vars.generated_pins&&(myLatLng=new google.maps.LatLng(lat,lng))}function wpestate_createMarker(pin_price,size,i,id,lat,lng,pin,title,counter,image,price,single_first_type,single_first_action,link,rooms,baths,cleanprice,single_first_type_name,single_first_action_name){"use strict";var myLatLng=new google.maps.LatLng(lat,lng),Titlex=jQuery("<textarea />").html(title).text(),poss=0,infobox_class=" price_infobox ",boxText,myOptions={content:document.createElement("div"),disableAutoPan:!0,maxWidth:infobox_width,boxClass:"mybox",zIndex:null,closeBoxMargin:"-13px 0px 0px 0px",closeBoxURL:"",infoBoxClearance:new google.maps.Size(1,1),isHidden:!1,pane:"floatPane",enableEventPropagation:!0};if(infoBox=new InfoBox(myOptions),"yes"===mapfunctions_vars.useprice){var price2=price,my_custom_curr_pos=parseFloat(wpestate_getCookie_map("my_custom_curr_pos"));if(!isNaN(my_custom_curr_pos)&&-1!==my_custom_curr_pos){var converted_price=wpestate_get_price_currency(cleanprice,cleanprice),testRE=price.match("</span>(.*)<span class=");null!==testRE&&(price2=price.replace(testRE[1],converted_price))}var myLatlng=new google.maps.LatLng(lat,lng);marker=new WpstateMarker(0,myLatlng,map,Titlex,counter,image,id,price2,pin_price,single_first_type,single_first_action,link,i,rooms,baths,cleanprice,size,single_first_type_name,single_first_action_name,pin,i)}else{infobox_class=" classic_info ";var marker=new google.maps.Marker({position:myLatLng,map:map,icon:wpestate_custompin(pin),shape:shape,title:Titlex,zIndex:counter,image:image,idul:id,price:price,category:single_first_type,action:single_first_action,link:link,infoWindowIndex:i,rooms:rooms,baths:baths,cleanprice:cleanprice,size:size,category_name:single_first_type_name,action_name:single_first_action_name})}gmarkers.push(marker),bounds.extend(marker.getPosition()),google.maps.event.addListener(marker,"click",(function(event){"undefined"==typeof is_map_shortcode&&(wpestate_map_callback(wpestate_new_open_close_map),google.maps.event.trigger(map,"resize")),info_image=""===this.image?'<img src="'+mapfunctions_vars.path+'/idxdefault.jpg" />':this.image;var category=decodeURIComponent(this.category.replace(/-/g," ")),action=decodeURIComponent(this.action.replace(/-/g," ")),category_name=decodeURIComponent(this.category_name.replace(/-/g," ")),action_name=decodeURIComponent(this.action_name.replace(/-/g," ")),in_type=mapfunctions_vars.in_text,infobaths,inforooms,infosize;""!==category&&""!==action||(in_type=" "),infobaths=""!=this.baths&&0!=this.baths?'<span id="infobath">'+this.baths+" "+mapfunctions_vars.ba+"</span>":"",inforooms=""!=this.rooms&&0!=this.rooms?'<span id="inforoom">'+this.rooms+" "+mapfunctions_vars.bd+"</span>":"",""!=this.size?(infosize='<span id="infosize">'+this.size,infosize+="</span>"):infosize="";var title=this.title.substr(0,30);this.title.length>30&&(title+="..."),infoBox.setContent(wpestate_generate_infobox(infobox_class,title,link,info_image,price,cleanprice,infosize,infobaths,inforooms)),infoBox.open(map,this),map.setCenter(this.position),"no"===control_vars.show_adv_search_map_close&&($(".search_wrapper").addClass("adv1_close"),wpestate_adv_search_click()),wpestate_close_adv_search()}))}function wpestate_pan_to_last_pin(myLatLng){"use strict";map.setCenter(myLatLng)}function wpestate_generate_infobox(infobox_class,title,link,info_image,price,cleanprice,infosize,infobaths,inforooms){var infobox='<div class="info_details '+infobox_class+'"><span id="infocloser" onClick=\'javascript:infoBox.close();\' ></span>';return infobox=(infobox=(infobox=(infobox=infobox+'<div class="infobox_wrapper_image"> <a href="'+link+'">'+info_image+"</a></div>")+'<div class="infobox_title"><a href="'+link+'" id="infobox_title">'+title+"</a></div>")+'<div class="prop_pricex">'+wpestate_get_price_currency(price,cleanprice)+"</div>")+'<div class="infobox_details">'+inforooms+" "+infobaths+" "+infosize+"</div></div>"}function wpestate_generate_infobox_sh(infobox_class,title,link,info_image,price,cleanprice,infosize,infobaths,inforooms){var infobox='<div class="info_details '+infobox_class+'"><span id="infocloser" onClick=\'javascript:infoBox_sh.close();\' ></span>';return infobox=(infobox=(infobox=(infobox=infobox+'<div class="infobox_wrapper_image"> <a href="'+link+'">'+info_image+"</a></div>")+'<div class="infobox_title"><a href="'+link+'" id="infobox_title">'+title+"</a></div>")+'<div class="prop_pricex">'+wpestate_get_price_currency(price,cleanprice)+"</div>")+'<div class="infobox_details">'+inforooms+" "+infobaths+" "+infosize+"</div></div>"}function wpestate_generate_infobox_leaflet(infobox_class,title,link,info_image,price,cleanprice,infosize,infobaths,inforooms){var title;(title=title.substr(0,32)).length>32&&(title+="...");var infobox='<div class="info_details '+infobox_class+'"><span id="infocloser" onClick=\'javascript:jQuery(".leaflet-popup-close-button")[0].click();\' ></span>';return infobox=(infobox=(infobox=(infobox=infobox+'<div class="infobox_wrapper_image"> <a href="'+link+'">'+info_image+"</a></div>")+'<div class="infobox_title"><a href="'+link+'" id="infobox_title">'+title+"</a></div>")+'<div class="prop_pricex">'+wpestate_get_price_currency(price,cleanprice)+"</div>")+'<div class="infobox_details">'+inforooms+" "+infobaths+" "+infosize+"</div></div>"}function wpestate_setOms(gmarkers){"use strict";for(var i=0;i<gmarkers.length;i++)"undefined"!=typeof oms&&oms.addMarker(gmarkers[i])}function wpestate_set_google_search(map){"use strict";var input,searchBox,places,place;2!=parseInt(mapbase_vars.wp_estate_kind_of_map)&&0!==jQuery("#google-default-search").length&&(input=document.getElementById("google-default-search"),searchBox=new google.maps.places.SearchBox(input),google.maps.event.addListener(searchBox,"places_changed",(function(){if(0!=(places=searchBox.getPlaces()).length){for(var bounds=new google.maps.LatLngBounds,i=0;place=places[i];i++){var image={url:place.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)},marker=new google.maps.Marker({map:map,icon:image,title:place.name,position:place.geometry.location});gmarkers.push(marker),bounds.extend(place.geometry.location)}map.fitBounds(bounds),bounds.isEmpty()?wpestate_fit_bounds_nolsit():wpestate_fit_bounds(bounds),map.setZoom(15)}})),google.maps.event.addListener(map,"bounds_changed",(function(){var bounds=map.getBounds();searchBox.setBounds(bounds)})))}function wpestate_fit_bounds_nolsit(){"use strict";map.setZoom(3)}function wpestate_fit_bounds(bounds){"use strict";""!=placeCircle?map.fitBounds(placeCircle.getBounds()):(map.fitBounds(bounds),google.maps.event.addListenerOnce(map,"idle",(function(){map.getZoom()>15&&map.setZoom(15)})))}function wpestate_new_open_close_map(type){"use strict";if(!jQuery("#gmap_wrapper").hasClass("fullmap")&&"1"!==mapfunctions_vars.open_close_status){var current_height=jQuery("#googleMap").outerHeight(),closed_height=parseInt(mapfunctions_vars.closed_height,10),open_height=parseInt(mapfunctions_vars.open_height,10),googleMap_h=open_height,gmapWrapper_h=open_height;null!==infoBox&&infoBox.close(),current_height===closed_height?(googleMap_h=open_height,Modernizr.mq("only all and (max-width: 940px)")?gmapWrapper_h=open_height:(jQuery("#gmap-menu").show(),gmapWrapper_h=open_height),wpestate_new_show_advanced_search(),vertical_off=0,jQuery("#openmap").empty().append('<i class="fas fa-angle-up"></i>'+mapfunctions_vars.close_map)):2===type&&(jQuery("#gmap-menu").hide(),jQuery("#advanced_search_map_form").hide(),googleMap_h=gmapWrapper_h=closed_height,wpestate_new_hide_advanced_search(),vertical_off=150),jQuery("#gmap_wrapper").css("height",gmapWrapper_h+"px"),jQuery("#googleMap").css("height",googleMap_h+"px"),jQuery(".tooltip").fadeOut("fast"),1===wp_estate_kind_of_map&&setTimeout((function(){google.maps.event.trigger(map,"resize")}),300)}}function wpestate_map_cluster(){"use strict";"yes"===mapfunctions_vars.user_cluster&&(clusterStyles=[{textColor:"#ffffff",opt_textColor:"#ffffff",url:images.cloud_pin,height:72,width:72,textSize:15}],mcOptions={gridSize:50,ignoreHidden:!0,maxZoom:parseInt(mapfunctions_vars.zoom_cluster,10),styles:clusterStyles},(mcluster=new MarkerClusterer(map,gmarkers,mcOptions)).setIgnoreHidden(!0))}function wpestate_myposition(map){"use strict";var latLong;navigator.geolocation?"https:"===location.protocol?navigator.geolocation.getCurrentPosition(wpestate_showMyPosition_original,wpestate_errorCallback,{timeout:1e4}):jQuery.getJSON("http://ipinfo.io",(function(ipinfo){wpestate_showMyPosition(latLong=ipinfo.loc.split(","))})):alert(mapfunctions_vars.geo_no_brow)}function wpestate_errorCallback(){"use strict";alert(mapfunctions_vars.geo_no_pos)}function wpestate_showMyPosition_original(pos){"use strict";if(1===wp_estate_kind_of_map){var shape={coord:[1,1,1,38,38,59,59,1],type:"poly"},MyPoint=new google.maps.LatLng(pos.coords.latitude,pos.coords.longitude);map.setCenter(MyPoint);var marker=new google.maps.Marker({position:MyPoint,map:map,icon:wpestate_custompinchild(),shape:shape,title:"",zIndex:999999999,image:"",price:"",category:"",action:"",link:"",infoWindowIndex:99,radius:parseInt(mapfunctions_vars.geolocation_radius,10)+" "+mapfunctions_vars.geo_message}),populationOptions={strokeColor:"#67cfd8",strokeOpacity:.6,strokeWeight:1,fillColor:"#67cfd8",fillOpacity:.2,map:map,center:MyPoint,radius:parseInt(mapfunctions_vars.geolocation_radius,10)},cityCircle=new google.maps.Circle(populationOptions),label=new Label({map:map});label.bindTo("position",marker),label.bindTo("text",marker,"radius"),label.bindTo("visible",marker),label.bindTo("clickable",marker),label.bindTo("zIndex",marker)}else{var new_pos;wprentals_draw_leaflet_circle([pos.coords.latitude,pos.coords.longitude])}}document.getElementById("gmapzoomplus")&&jQuery("#gmapzoomplus").on("click",(function(){"use strict";var current=parseInt(map.getZoom(),10);++current>20&&(current=20),map.setZoom(current)})),document.getElementById("gmapzoomminus")&&jQuery("#gmapzoomminus").on("click",(function(){"use strict";var current=parseInt(map.getZoom(),10);--current<0&&(current=0),map.setZoom(current)})),document.getElementById("geolocation-button")&&jQuery("#geolocation-button").on("click",(function(){"use strict";wpestate_myposition(map),wpestate_close_adv_search()})),document.getElementById("mobile-geolocation-button")&&jQuery("#mobile-geolocation-button").on("click",(function(){"use strict";wpestate_myposition(map),wpestate_close_adv_search()}));var geo_markers=[],geo_circle=[],geo_label=[];function wpestate_showMyPosition(pos){"use strict";1===wp_estate_kind_of_map?wpresidence_draw_google_circle(pos):2===wp_estate_kind_of_map&&wprentals_draw_leaflet_circle(pos)}function wprentals_draw_leaflet_circle(pos){L.circle([pos[0],pos[1]],parseInt(mapfunctions_vars.geolocation_radius,10)).addTo(map);var markerImage={iconUrl:wprentals_custompinchild_leaflet(),iconSize:[38,59],iconAnchor:[20,50],popupAnchor:[1,-50]},markerOptions={riseOnHover:!0},markerCenter=L.latLng(pos[0],pos[1]);markerOptions.icon=L.icon(markerImage),L.marker(markerCenter,markerOptions).addTo(map);var wpresidence_leaflet_label='<div class="wpresidence_leaflet_label">';wpresidence_leaflet_label+=parseInt(mapfunctions_vars.geolocation_radius,10)+" "+mapfunctions_vars.geo_message,wpresidence_leaflet_label+="</div>";var myIcon=L.divIcon({className:"someclass",iconSize:new L.Point(0,0),html:wpresidence_leaflet_label});L.marker(markerCenter,{icon:myIcon}).addTo(map),map.panTo(markerCenter),map.setZoom(10)}function wpresidence_draw_google_circle(pos){"use strict";for(var i=0;i<geo_markers.length;i++)geo_markers[i].setMap(null),geo_circle[i].setMap(null),geo_label[i].setMap(null);geo_markers=[],geo_circle=[],geo_label=[];var shape={coord:[1,1,1,38,38,59,59,1],type:"poly"},MyPoint=new google.maps.LatLng(pos[0],pos[1]);map.setCenter(MyPoint),map.setZoom(13);var marker=new google.maps.Marker({position:MyPoint,map:map,icon:wpestate_custompinchild(),shape:shape,title:"",zIndex:999999999,image:"",price:"",category:"",action:"",link:"",infoWindowIndex:99,radius:parseInt(mapfunctions_vars.geolocation_radius,10)+" "+mapfunctions_vars.geo_message});geo_markers.push(marker);var populationOptions={strokeColor:"#67cfd8",strokeOpacity:.6,strokeWeight:1,fillColor:"#67cfd8",fillOpacity:.2,map:map,center:MyPoint,radius:parseInt(mapfunctions_vars.geolocation_radius,10)},cityCircle=new google.maps.Circle(populationOptions);geo_circle.push(cityCircle);var label=new Label({map:map});label.bindTo("position",marker),label.bindTo("text",marker,"radius"),label.bindTo("visible",marker),label.bindTo("clickable",marker),label.bindTo("zIndex",marker),geo_label.push(cityCircle)}function wpestate_custompinchild(){"use strict";var custom_img,extension="",ratio=jQuery(window).dense("devicePixelRatio"),image;return ratio>1&&(extension="_2x"),void 0===images.userpin||""===images.userpin?custom_img=mapfunctions_vars.path+"/userpin"+extension+".png":(custom_img=images.userpin,ratio>1&&(custom_img=wpestate_get_custom_retina_pin(custom_img))),image=ratio>1?{url:custom_img,size:new google.maps.Size(88,96),scaledSize:new google.maps.Size(44,48),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,59)}:{url:custom_img,size:new google.maps.Size(59,59),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,59)}}function wpestate_getCookieMap(cname){"use strict";for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""}function wpestate_get_custom_value_tab_search(slug){"use strict";var value="",is_drop=0;return"adv_categ"===slug||"adv_actions"===slug||"advanced_city"===slug||"advanced_area"===slug||"county-state"===slug?value=jQuery(".tab-pane.active #"+slug).attr("data-value"):"property_price"===slug&&"yes"===mapfunctions_vars.slider_price?value=jQuery(".tab-pane.active #price_low").val():"property-country"===slug?value=jQuery(".tab-pane.active #advanced_country").attr("data-value"):"property_status"===slug?value=jQuery(".tab-pane.active #adv_status").attr("data-value"):"adv_location"===slug?value=jQuery(".tab-pane.active .adv_locations_search").val():""!==slug&&(jQuery(".tab-pane.active #"+slug).hasClass("filter_menu_trigger")?(value=jQuery(".tab-pane.active #"+slug).attr("data-value"),is_drop=1):value=jQuery(".tab-pane.active #"+slug).val()),value}function wpestate_get_custom_value(slug){"use strict";var value,is_drop=0;return"adv_categ"===slug||"adv_actions"===slug||"advanced_city"===slug||"advanced_area"===slug||"county-state"===slug?value=jQuery("#"+slug).attr("data-value"):"property_price"===slug&&"yes"===mapfunctions_vars.slider_price?value=jQuery("#price_low").val():"property_status"===slug?value=jQuery("#adv_status").attr("data-value"):"property-country"===slug?value=jQuery("#advanced_country").attr("data-value"):"adv_location"===slug?value=jQuery(".adv_locations_search").val():jQuery("#"+slug).hasClass("filter_menu_trigger")?(value=jQuery("#"+slug).attr("data-value"),is_drop=1):value=jQuery("#"+slug).val(),value}function wpestate_show_pins(){"use strict";var action,category,city,area,rooms,baths,min_price,price_max,ajaxurl,postid,halfmap,all_checkers,newpage;if(jQuery("#results").show(),jQuery("#results_wrapper").empty().append('<div class="preview_results_loading">'+mapfunctions_vars.loading_results+"</div>").show(),"undefined"!=typeof infoBox&&null!==infoBox&&infoBox.close(),jQuery("#gmap-loading").show(),"undefined"!=typeof googlecode_regular_vars){if(("8"===mapfunctions_vars.adv_search_type||"9"===mapfunctions_vars.adv_search_type)&&"1"!==mapfunctions_vars.is_half_map_list)return void wpestate_show_pins_type2_tabs();if("2"===mapfunctions_vars.adv_search_type&&"1"!==mapfunctions_vars.is_half_map_list&&"1"!==mapfunctions_vars.is_adv_search)return void wpestate_show_pins_type2()}else{if("8"===mapfunctions_vars.adv_search_type||"9"===mapfunctions_vars.adv_search_type)return void wpestate_show_pins_type2_tabs();if("2"===mapfunctions_vars.adv_search_type&&"1"!==mapfunctions_vars.is_half_map_list)return void wpestate_show_pins_type2()}if("yes"!==mapfunctions_vars.custom_search){action=jQuery("#adv_actions").attr("data-value"),category=jQuery("#adv_categ").attr("data-value"),city=jQuery("#advanced_city").attr("data-value"),area=jQuery("#advanced_area").attr("data-value"),rooms=parseFloat(jQuery("#adv_rooms").val(),10),baths=parseFloat(jQuery("#adv_bath").val(),10),min_price=parseFloat(jQuery("#price_low").val(),10),price_max=parseFloat(jQuery("#price_max").val(),10),postid=parseFloat(jQuery("#adv-search-1").attr("data-postid"),10),ajaxurl=ajaxcalls_vars.admin_url+"admin-ajax.php",1===parseInt(mapfunctions_vars.is_half)&&(0===first_time_wpestate_show_inpage_ajax_half?first_time_wpestate_show_inpage_ajax_half=1:wpestate_show_inpage_ajax_half()),all_checkers="",jQuery('.search_wrapper .extended_search_check_wrapper  input[type="checkbox"]').each((function(){jQuery(this).is(":checked")&&(all_checkers=all_checkers+","+jQuery(this).attr("name-title"))})),halfmap=0,newpage=0,jQuery("#google_map_prop_list_sidebar").length&&(halfmap=1),postid=1,document.getElementById("search_wrapper")&&(postid=parseInt(jQuery("#search_wrapper").attr("data-postid"),10));var geo_lat="",geo_long="",geo_rad="";jQuery("#geolocation_search").length>0&&(geo_lat=jQuery("#geolocation_lat").val(),geo_long=jQuery("#geolocation_long").val(),geo_rad=jQuery("#geolocation_radius").val());var nonce=jQuery("#wpestate_ajax_filtering").val();jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"wpestate_classic_ondemand_pin_load",action_values:action,category_values:category,city:city,area:area,advanced_rooms:rooms,advanced_bath:baths,price_low:min_price,price_max:price_max,newpage:0,postid:postid,halfmap:halfmap,all_checkers:all_checkers,geo_lat:geo_lat,geo_long:geo_long,geo_rad:geo_rad,security:nonce},success:function(data){var no_results=parseInt(data.no_results);0!==no_results?wpestate_load_on_demand_pins(data.markers,no_results,1):wpestate_show_no_results(),jQuery("#gmap-loading").hide()},error:function(errorThrown){}})}else wpestate_show_pins_custom_search()}function wpestate_show_pins_type2(){"use strict";var action,category,location_search,ajaxurl,postid,halfmap,all_checkers,newpage;action=jQuery("#adv_actions").attr("data-value"),category=jQuery("#adv_categ").attr("data-value"),location_search=jQuery("#adv_location").val(),postid=parseInt(jQuery("#adv-search-1").attr("data-postid"),10),ajaxurl=ajaxcalls_vars.admin_url+"admin-ajax.php",halfmap=0,newpage=0,jQuery("#google_map_prop_list_sidebar").length&&(halfmap=1),postid=1,document.getElementById("search_wrapper")&&(postid=parseInt(jQuery("#search_wrapper").attr("data-postid"),10));var nonce=jQuery("#wpestate_ajax_filtering").val();jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"wpestate_classic_ondemand_pin_load_type2",action_values:action,category_values:category,location:location_search,security:nonce},success:function(data){var no_results=parseInt(data.no_results);0!==no_results?wpestate_load_on_demand_pins(data.markers,no_results,1):wpestate_show_no_results(),jQuery("#gmap-loading").hide()},error:function(errorThrown){}}),1===parseInt(mapfunctions_vars.is_half)&&(0===first_time_wpestate_show_inpage_ajax_half?first_time_wpestate_show_inpage_ajax_half=1:wpestate_show_inpage_ajax_half())}function wpestate_show_pins_type2_tabs(){"use strict";var action,category,location_search,ajaxurl,postid,halfmap,all_checkers,newpage,picked_tax;void 0===(action=jQuery(".tab-pane.active #adv_actions").attr("data-value"))&&(action=""),void 0===(category=jQuery(".tab-pane.active #adv_categ").attr("data-value"))&&(category=""),location_search=jQuery(".tab-pane.active #adv_location").val(),picked_tax=jQuery(".tab-pane.active .picked_tax").val(),postid=parseInt(jQuery("#adv-search-1").attr("data-postid"),10),ajaxurl=ajaxcalls_vars.admin_url+"admin-ajax.php",ajaxurl=ajaxcalls_vars.wpestate_ajax,halfmap=0,newpage=0,jQuery("#google_map_prop_list_sidebar").length&&(halfmap=1),postid=1,document.getElementById("search_wrapper")&&(postid=parseInt(jQuery("#search_wrapper").attr("data-postid"),10));var term_id=jQuery(".tab-pane.active .term_id_class").val();all_checkers="",jQuery('.tab-pane.active .extended_search_check_wrapper input[type="checkbox"]').each((function(){jQuery(this).is(":checked")&&(all_checkers=all_checkers+","+jQuery(this).attr("name-title"))}));var nonce=jQuery("#wpestate_ajax_filtering").val();jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"wpestate_classic_ondemand_pin_load_type2_tabs",action_values:action,category_values:category,location:location_search,picked_tax:picked_tax,all_checkers:all_checkers,security:nonce},success:function(data){var no_results=parseInt(data.no_results);0!==no_results?wpestate_load_on_demand_pins(data.markers,no_results,1):wpestate_show_no_results(),jQuery("#gmap-loading").hide()},error:function(errorThrown){}}),1===parseInt(mapfunctions_vars.is_half)&&(0===first_time_wpestate_show_inpage_ajax_half?first_time_wpestate_show_inpage_ajax_half=1:wpestate_show_inpage_ajax_half())}function wpestate_show_pins_custom_search(){"use strict";var ajaxurl,initial_array_last_item,array_last_item,how_holder,slug_holder,val_holder,position,inserted_val,temp_val,term_id,halfmap,newpage,postid,slider_min,slider_max;ajaxurl=ajaxcalls_vars.wpestate_ajax,inserted_val=0,initial_array_last_item=array_last_item=parseInt(mapfunctions_vars.fields_no,10),val_holder=[],slug_holder=[],how_holder=[],slug_holder=JSON.parse(JSON.stringify(mapfunctions_vars.slugs)),how_holder=JSON.parse(JSON.stringify(mapfunctions_vars.hows));var term_counter=0,i,start_counter;if("yes"===mapfunctions_vars.slider_price&&(slider_min=jQuery("#price_low").val(),slider_max=jQuery("#price_max").val()),term_counter=parseInt(jQuery(".tab-pane.active").find(".term_counter").val(),10),"6"===mapfunctions_vars.adv_search_type||"7"===mapfunctions_vars.adv_search_type)for(term_id=jQuery(".tab-pane.active .term_id_class").val(),"yes"===mapfunctions_vars.slider_price&&(slider_min=jQuery("#price_low_"+term_id).val(),slider_max=jQuery("#price_max_"+term_id).val()),term_counter>0&&(array_last_item=array_last_item*term_counter+array_last_item),i=term_counter*mapfunctions_vars.fields_no;i<array_last_item;i++)void 0===(temp_val="date bigger"==how_holder[i]||"date smaller"==how_holder[i]?wpestate_get_custom_value_tab_search(term_id+slug_holder[i]):wpestate_get_custom_value_tab_search(slug_holder[i]))&&(temp_val=""),val_holder.push(temp_val);else for(i=0;i<array_last_item;i++)void 0===(temp_val=wpestate_get_custom_value(slug_holder[i]))&&(temp_val=""),val_holder.push(temp_val);if("6"===mapfunctions_vars.adv_search_type||"7"===mapfunctions_vars.adv_search_type||"8"===mapfunctions_vars.adv_search_type||"9"===mapfunctions_vars.adv_search_type){var tab_tax=jQuery(".adv_search_tab_item.active").attr("data-tax");jQuery(".halfsearch")[0]&&(tab_tax=jQuery(".halfsearch").attr("data-tax")),"property_category"===tab_tax?slug_holder[array_last_item]="adv_categ":"property_action_category"===tab_tax?slug_holder[array_last_item]="adv_actions":"property_city"===tab_tax?slug_holder[array_last_item]="advanced_city":"property_area"===tab_tax?slug_holder[array_last_item]="advanced_area":"property_county_state"===tab_tax&&(slug_holder[array_last_item]="county-state"),how_holder[array_last_item]="like",val_holder[initial_array_last_item]=jQuery(".adv_search_tab_item.active").attr("data-term")}1===parseInt(mapfunctions_vars.is_half)&&(0===first_time_wpestate_show_inpage_ajax_half?first_time_wpestate_show_inpage_ajax_half=1:wpestate_show_inpage_ajax_half());var all_checkers="";"6"===mapfunctions_vars.adv_search_type?jQuery('.tab-pane.active .extended_search_check_wrapper  input[type="checkbox"]').each((function(){jQuery(this).is(":checked")&&(all_checkers=all_checkers+","+jQuery(this).attr("name-title"))})):jQuery('.search_wrapper .extended_search_check_wrapper  input[type="checkbox"]').each((function(){jQuery(this).is(":checked")&&(all_checkers=all_checkers+","+jQuery(this).attr("name-title"))})),halfmap=0,newpage=0,jQuery("#google_map_prop_list_sidebar").length&&(halfmap=1),postid=1,document.getElementById("search_wrapper")&&(postid=parseInt(jQuery("#search_wrapper").attr("data-postid"),10));var filter_search_action10="",adv_location10="";"10"===mapfunctions_vars.adv_search_type&&(filter_search_action10=jQuery("#adv_actions").attr("data-value"),adv_location10=jQuery("#adv_location").val());var filter_search_action11="",filter_search_categ11="",keyword_search="";keyword_search=jQuery("#keyword").val(),"11"===mapfunctions_vars.adv_search_type&&(filter_search_action11=jQuery("#adv_actions").attr("data-value"),filter_search_categ11=jQuery("#adv_categ").attr("data-value"),keyword_search=jQuery("#keyword_search").val());var geo_lat="",geo_long="",geo_rad="";jQuery("#geolocation_search").length>0&&(geo_lat=jQuery("#geolocation_lat").val(),geo_long=jQuery("#geolocation_long").val(),geo_rad=jQuery("#geolocation_radius").val()),jQuery(".tab-pane.active .geolocation_search_item").length>0&&(geo_lat=jQuery(".tab-pane.active .geolocation_lat").val(),geo_long=jQuery(".tab-pane.active .geolocation_long").val(),geo_rad=jQuery(".tab-pane.active #geolocation_radius").val());var nonce=jQuery("#wpestate_ajax_filtering").val();jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"wpestate_custom_ondemand_pin_load",search_type:mapfunctions_vars.adv_search_type,val_holder:val_holder,newpage:0,postid:postid,halfmap:halfmap,slider_min:slider_min,slider_max:slider_max,all_checkers:all_checkers,filter_search_action10:filter_search_action10,adv_location10:adv_location10,filter_search_action11:filter_search_action11,filter_search_categ11:filter_search_categ11,keyword_search:keyword_search,geo_lat:geo_lat,geo_long:geo_long,geo_rad:geo_rad,term_counter:term_counter,security:nonce},success:function(data){var no_results=parseInt(data.no_results);0!==no_results?wpestate_load_on_demand_pins(data.markers,no_results,1):(wpestate_show_no_results(),wpestate_start_placing_geo_marker()),jQuery("#gmap-loading").hide()},error:function(errorThrown){}})}function wpestate_empty_map(){"use strict";if("undefined"!=typeof gmarkers)if(1==wp_estate_kind_of_map){for(var i=0;i<gmarkers.length;i++)gmarkers[i].setVisible(!1),gmarkers[i].setMap(null);gmarkers=[],void 0!==mcluster&&mcluster.clearMarkers()}else if(2==wp_estate_kind_of_map&&"undefined"!=typeof map){if("yes"===mapfunctions_vars.user_cluster)map.hasLayer(markers_cluster)&&map.removeLayer(markers_cluster);else for(var i=0;i<gmarkers.length;i++)map.removeLayer(gmarkers[i]);gmarkers=[],markers_cluster=L.markerClusterGroup({showCoverageOnHover:!1,iconCreateFunction:function(cluster){return L.divIcon({html:'<div class="leaflet_cluster">'+cluster.getChildCount()+"</div>"})}}),map.addLayer(markers_cluster)}}document.getElementById("gmap")&&google.maps.event.addDomListener(document.getElementById("gmap"),"mouseout",(function(){google.maps.event.trigger(map,"resize")})),document.getElementById("search_map_button")&&google.maps.event.addDomListener(document.getElementById("search_map_button"),"click",(function(){infoBox.close()})),document.getElementById("advanced_search_map_button")&&google.maps.event.addDomListener(document.getElementById("advanced_search_map_button"),"click",(function(){infoBox.close()})),jQuery("#gmap-next").on("click",(function(event){"use strict";for(current_place++,external_action_ondemand=1,lealet_map_move_on_hover=1,current_place>gmarkers.length&&(current_place=1);!1===gmarkers[current_place-1].visible;)current_place++,current_place>gmarkers.length&&(current_place=1);map.getZoom()<15&&map.setZoom(15),1===wp_estate_kind_of_map?google.maps.event.trigger(gmarkers[current_place-1],"click"):2===wp_estate_kind_of_map&&(map.setView(gmarkers[current_place-1].getLatLng()),gmarkers[current_place-1]._icon||gmarkers[current_place-1].__parent.spiderfy(),lealet_map_move_on_hover=1,map.setZoom(20),current_place-1==0||current_place-1==gmarkers.length?setTimeout((function(){gmarkers[current_place-1].fire("click")}),1e3):gmarkers[current_place-1].fire("click"),lealet_map_move_on_hover=1,wpestate_map_callback(wpestate_new_open_close_map))})),jQuery("#gmap-prev").on("click",(function(event){"use strict";for(external_action_ondemand=1,lealet_map_move_on_hover=1,current_place--,current_place<1&&(current_place=gmarkers.length);!1===gmarkers[current_place-1].visible;)current_place--,current_place>gmarkers.length&&(current_place=1);map.getZoom()<15&&map.setZoom(15),1===wp_estate_kind_of_map?google.maps.event.trigger(gmarkers[current_place-1],"click"):2===wp_estate_kind_of_map&&(map.setView(gmarkers[current_place-1].getLatLng()),gmarkers[current_place-1]._icon||gmarkers[current_place-1].__parent.spiderfy(),lealet_map_move_on_hover=1,map.setZoom(20),current_place-1==0||current_place==gmarkers.length?setTimeout((function(){gmarkers[current_place-1].fire("click")}),1e3):gmarkers[current_place-1].fire("click"),lealet_map_move_on_hover=1,wpestate_map_callback(wpestate_new_open_close_map)),current_place--})),jQuery(".advanced_action_div li").on("click",(function(event){"use strict";var action=jQuery(this).val()})),document.getElementById("gmap-menu")&&google.maps.event.addDomListener(document.getElementById("gmap-menu"),"click",(function(event){"use strict";infoBox.close(),"INPUT"===event.target.nodeName&&(category=event.target.className,"filter_action[]"===event.target.name&&(-1!==actions.indexOf(category)?actions.splice(actions.indexOf(category),1):actions.push(category)),"filter_type[]"===event.target.name&&(-1!==categories.indexOf(category)?categories.splice(categories.indexOf(category),1):categories.push(category)),show(actions,categories))}));var use_geolocation_marker=0;function wpestate_load_on_demand_pins(markers,no_results,show_results_bar){"use strict";jQuery("#gmap-noresult").hide(),wpestate_empty_map(),document.getElementById("googleMap")?(bounds_list=void 0,wpresidence_map_general_set_markers(map,markers,1),wpestate_preview_listings(markers),wpresidence_map_general_cluster(),wpresidence_map_general_fit_to_bounds(1)):wpestate_preview_listings(markers),wpestate_start_placing_geo_marker()}function wpestate_start_placing_geo_marker(){if(0===initialGeop){var place_lat=jQuery("#geolocation_lat").val(),place_lng=jQuery("#geolocation_long").val();""!==place_lat&&""!=place_lng&&void 0!==place_lat&&void 0!==place_lng&&(initialGeop=1,wpestate_geolocation_marker(place_lat,place_lng))}}function wpestate_preview_listings(markers){"use strict";var i=0,to_append="",image="",title="",link="",clean_price="",price="";for(i=0;i<markers.length;i++)image=decodeURIComponent(markers[i][18]),title=decodeURIComponent(markers[i][0]),link=decodeURIComponent(markers[i][9]),clean_price=decodeURIComponent(markers[i][11]),to_append=to_append+'<div class="preview_listing_unit" data-href="'+link+'">'+image+" <h4>"+title+'</h4><div class="preview_details">'+(price=wpestate_get_price_currency(decodeURIComponent(markers[i][5]),clean_price))+"</div></div>";jQuery("#results_wrapper").empty(),jQuery("#results_no").show().text(markers.length),jQuery("#results_wrapper").append(to_append),jQuery(".preview_listing_unit").on("click",(function(event){var new_link;event.preventDefault(),new_link=jQuery(this).attr("data-href"),window.open(new_link,"_self",!1)}))}function wpestate_get_price_currency(price,clean_price){"use strict";var new_price="",my_custom_curr_symbol=decodeURIComponent(wpestate_getCookie_map("my_custom_curr_symbol")),my_custom_curr_coef=parseFloat(wpestate_getCookie_map("my_custom_curr_coef")),my_custom_curr_pos=parseFloat(wpestate_getCookie_map("my_custom_curr_pos")),my_custom_curr_cur_post=wpestate_getCookie_map("my_custom_curr_cur_post"),slider_counter=0;if(isNaN(my_custom_curr_pos)||-1===my_custom_curr_pos)new_price=price;else{var temp_price=Number(clean_price*my_custom_curr_coef).toFixed(2);new_price="before"===my_custom_curr_cur_post?my_custom_curr_symbol+" "+temp_price:temp_price+" "+my_custom_curr_symbol}return new_price}function wpestate_getCookie_map(cname){"use strict";for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""}function wpestate_show_no_results(){"use strict";jQuery("#results_no").show().text("0"),jQuery("#results_wrapper").empty().append('<div class="preview_results_loading">'+mapfunctions_vars.half_no_results+"</div>").show(),jQuery("#gmap-noresult").show(),document.getElementById("google_map_prop_list_wrapper")&&jQuery("#listing_ajax_container").empty().append('<p class=" no_results_title ">'+mapfunctions_vars.half_no_results+"</p>")}function wpestate_show_inpage_ajax_tip2(){"use strict";jQuery("#gmap-full").hasClass("spanselected")&&jQuery("#gmap-full").trigger("click"),"yes"===mapfunctions_vars.custom_search?wpestate_custom_search_start_filtering_ajax(1):wpestate_start_filtering_ajax(1)}function wpestate_show_inpage_ajax_half(){"use strict";jQuery(".half-pagination").remove(),"yes"===mapfunctions_vars.custom_search?wpestate_custom_search_start_filtering_ajax(1):wpestate_start_filtering_ajax(1)}function wpestate_enable_half_map_pin_action(){"use strict";jQuery("#google_map_prop_list_sidebar .listing_wrapper").on({mouseenter:function(){var listing_id;wpestate_hover_action_pin(jQuery(this).attr("data-listid"))},mouseleave:function(){var listing_id;wpestate_return_hover_action_pin(jQuery(this).attr("data-listid"))}})}function wpestate_convertToSlug(Text){"use strict";return Text.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")}function wpestate_get_custom_retina_pin(custom_img){"use strict";var custom_img_retina;if(void 0!==custom_img)return custom_img_retina=custom_img.replace(".png","_2x.png"),jQuery.get(custom_img_retina).done((function(){custom_img=custom_img_retina})).fail((function(){})),custom_img}function wpestate_custompin(image){"use strict";if(!mapfunctions_vars.hidden_map)return image={path:google.maps.SymbolPath.CIRCLE,scale:60,fillColor:"#0073e1",fillOpacity:.4,strokeWeight:.2};var extension="",ratio=jQuery(window).dense("devicePixelRatio"),custom_img;return ratio>1&&(extension="_2x"),"no"===mapfunctions_vars.use_single_image_pin?(""!==image?void 0===images[image]||""===images[image]?custom_img=mapfunctions_vars.path+"/"+image+extension+".png":(custom_img=images[image],ratio>1&&(custom_img=wpestate_get_custom_retina_pin(custom_img))):custom_img=mapfunctions_vars.path+"/none.png",void 0===custom_img&&(custom_img=mapfunctions_vars.path+"/none.png")):custom_img=ratio>1?wpestate_get_custom_retina_pin(images.single_pin):images.single_pin,image=ratio>1?{url:custom_img,size:new google.maps.Size(118,118),scaledSize:new google.maps.Size(44,48),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,49),optimized:!1}:{url:custom_img,size:new google.maps.Size(59,59),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,49)}}function Label(opt_options){"use strict";this.setValues(opt_options);var span=this.span_=document.createElement("span");span.style.cssText="position: relative; left: -50%; top: 8px; white-space: nowrap;  padding: 2px; background-color: white;opacity:0.7";var div=this.div_=document.createElement("div");div.appendChild(span),div.style.cssText="position: absolute; display: none"}function wpestate_close_adv_search(){}function wpestate_new_show_advanced_search(){"use strict";jQuery("#search_wrapper").removeClass("hidden")}function wpestate_new_hide_advanced_search(){"use strict";"no"===mapfunctions_vars.show_adv_search&&jQuery("#search_wrapper").addClass("hidden")}function wpestate_hover_action_pin(listing_id){"use strict";for(var i=0;i<gmarkers.length;i++)parseInt(gmarkers[i].idul,10)===parseInt(listing_id,10)&&(1===wp_estate_kind_of_map?(google.maps.event.trigger(gmarkers[i],"click"),"yes"!==mapfunctions_vars.useprice?(pin_hover_storage=gmarkers[i].icon,gmarkers[i].setIcon(wpestate_custompinhover())):gmarkers[i].addHoverClass()):2===wp_estate_kind_of_map&&(lealet_map_move_on_hover=1,gmarkers[i]._icon||gmarkers[i].__parent.spiderfy(),map.panTo(gmarkers[i].getLatLng()),gmarkers[i].togglePopup(),"yes"!==mapfunctions_vars.useprice?gmarkers[i].setIcon(wpestate_custompinhover()):L.DomUtil.addClass(gmarkers[i]._icon,"openstreet_price_marker_on_click_parent")))}function wpestate_return_hover_action_pin(listing_id){"use strict";for(var i=0;i<gmarkers.length;i++)if(parseInt(gmarkers[i].idul,10)===parseInt(listing_id,10))if(1===wp_estate_kind_of_map)parseInt(gmarkers[i].idul,10)===parseInt(listing_id,10)&&(infoBox.close(),"yes"!==mapfunctions_vars.useprice?gmarkers[i].setIcon(pin_hover_storage):gmarkers[i].removeHoverClass());else if(2===wp_estate_kind_of_map)if(gmarkers[i].togglePopup(),lealet_map_move_on_hover=0,"yes"!==mapfunctions_vars.useprice){var markerImage=L.icon({iconUrl:wprentals_custompin_leaflet(gmarkers[i].pin),iconSize:[44,50],iconAnchor:[20,50],popupAnchor:[1,-50]});gmarkers[i].setIcon(markerImage)}else L.DomUtil.removeClass(gmarkers[i]._icon,"openstreet_price_marker_on_click_parent")}function wpestate_custompinhover(){"use strict";var custom_img,image,extension="",ratio=jQuery(window).dense("devicePixelRatio");if(ratio>1&&(extension="_2x"),custom_img=mapfunctions_vars.path+"/hover"+extension+".png",2===wp_estate_kind_of_map){if(ratio>1)var markerImage=L.icon({iconUrl:custom_img,iconSize:[90,90],iconAnchor:[40,90],popupAnchor:[1,-90]});else var markerImage=L.icon({iconUrl:custom_img,iconSize:[44,50],iconAnchor:[20,50],popupAnchor:[1,-50]});return markerImage}return image=ratio>1?{url:custom_img,size:new google.maps.Size(132,144),scaledSize:new google.maps.Size(66,72),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(25,72)}:{url:custom_img,size:new google.maps.Size(90,90),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(25,72)}}function wpestate_map_callback(callback){"use strict";callback(1)}"undefined"!=typeof google&&(Label.prototype=new google.maps.OverlayView),Label.prototype.onAdd=function(){"use strict";var pane;this.getPanes().overlayImage.appendChild(this.div_);var me=this;this.listeners_=[google.maps.event.addListener(this,"position_changed",(function(){me.draw()})),google.maps.event.addListener(this,"visible_changed",(function(){me.draw()})),google.maps.event.addListener(this,"clickable_changed",(function(){me.draw()})),google.maps.event.addListener(this,"text_changed",(function(){me.draw()})),google.maps.event.addListener(this,"zindex_changed",(function(){me.draw()})),google.maps.event.addDomListener(this.div_,"click",(function(){me.get("clickable")&&google.maps.event.trigger(me,"click")}))]},Label.prototype.onRemove=function(){"use strict";this.div_.parentNode.removeChild(this.div_);for(var i=0,I=this.listeners_.length;i<I;++i)google.maps.event.removeListener(this.listeners_[i])},Label.prototype.draw=function(){"use strict";var projection,position=this.getProjection().fromLatLngToDivPixel(this.get("position")),div=this.div_;div.style.left=position.x+"px",div.style.top=position.y+"px";var visible=this.get("visible");div.style.display=visible?"block":"none";var clickable=this.get("clickable");this.span_.style.cursor=clickable?"pointer":"";var zIndex=this.get("zIndex");div.style.zIndex=zIndex,this.span_.innerHTML=this.get("text").toString()};var wpestate_initialize_poi=function(map_for_poi,what){"use strict";if(2!=parseInt(mapbase_vars.wp_estate_kind_of_map)&&void 0!==google.maps.places){var poi_service=new google.maps.places.PlacesService(map_for_poi),already_serviced="",show_poi="",map_bounds=map_for_poi.getBounds(),selector=".google_poi";2==what&&(selector=".google_poish"),jQuery(selector).on("click",(function(event){event.stopPropagation(),poi_type=jQuery(this).attr("id");var position=map_for_poi.getCenter(),show_poi=wpestate_return_poi_values(poi_type);if(jQuery(this).hasClass("poi_active"))wpestate_show_hide_poi(poi_type,"hide");else if(1===(already_serviced=wpestate_show_hide_poi(poi_type,"show"))){var request={location:position,types:show_poi,bounds:map_bounds,radius:2500};poi_service.nearbySearch(request,(function(results,status){wpestate_googlemap_display_poi(results,status,map_for_poi)}))}jQuery(this).toggleClass("poi_active")}));var wpestate_return_poi_values=function(poi_type){var show_poi;switch(poi_type){case"transport":show_poi=["bus_station","airport","train_station","subway_station"];break;case"supermarkets":show_poi=["grocery_or_supermarket","shopping_mall"];break;case"schools":show_poi=["school","university"];break;case"restaurant":show_poi=["restaurant"];break;case"pharma":show_poi=["pharmacy"];break;case"hospitals":show_poi=["hospital"]}return show_poi},wpestate_googlemap_display_poi=function(results,status,map_for_poi){var place,poi_marker;if(google.maps.places.PlacesServiceStatus.OK==status)for(var i=0;i<results.length;i++)poi_marker=wpestate_create_poi_marker(results[i],map_for_poi),poi_marker_array.push(poi_marker)},wpestate_create_poi_marker=function(place,map_for_poi){var marker=new google.maps.Marker({map:map_for_poi,position:place.geometry.location,show_poi:poi_type,icon:mapfunctions_vars.path+"/poi/"+poi_type+".png"}),boxText=document.createElement("div"),infobox_poi=new InfoBox({content:boxText,boxClass:"estate_poi_box",pixelOffset:new google.maps.Size(-30,-70),zIndex:null,maxWidth:275,closeBoxMargin:"-13px 0px 0px 0px",closeBoxURL:"",infoBoxClearance:new google.maps.Size(1,1),pane:"floatPane",enableEventPropagation:!1});return google.maps.event.addListener(marker,"mouseover",(function(event){infobox_poi.setContent(place.name),infobox_poi.open(map_for_poi,this)})),google.maps.event.addListener(marker,"mouseout",(function(event){null!==infobox_poi&&infobox_poi.close()})),marker},wpestate_show_hide_poi=function(poi_type,showhide){for(var is_hiding=1,i=0;i<poi_marker_array.length;i++)poi_marker_array[i].show_poi===poi_type&&("hide"===showhide?poi_marker_array[i].setVisible(!1):(poi_marker_array[i].setVisible(!0),is_hiding=0));return is_hiding}}};function wpestate_geolocation_marker(place_lat,place_lng){"use strict";var place_radius;if(place_radius="miles"===control_vars.geo_radius_measure?1609.34*parseInt(jQuery("#geolocation_radius").val(),10):1e3*parseInt(jQuery("#geolocation_radius").val(),10),1===wp_estate_kind_of_map){var place_position=new google.maps.LatLng(place_lat,place_lng);map.setCenter(place_position),""!=placeCircle&&(placeCircle.setMap(null),placeCircle="");var marker=new google.maps.Marker({map:map,position:place_position,icon:mapfunctions_vars.path+"/poi/location.png"}),populationOptions={strokeColor:"#67cfd8",strokeOpacity:.6,strokeWeight:1,fillColor:"#1CA8DD",fillOpacity:.2,map:map,center:place_position,radius:parseInt(place_radius,10)};placeCircle=new google.maps.Circle(populationOptions),map.fitBounds(placeCircle.getBounds())}else{var markerCenter=L.latLng(place_lat,place_lng);map.panTo(markerCenter),map.hasLayer(circleLayer)&&map.removeLayer(circleLayer);var markerImage={iconUrl:mapfunctions_vars.path+"/poi/location.png",iconSize:[28,38],iconAnchor:[10,19],popupAnchor:[1,-18]},markerOptions={riseOnHover:!0};map.hasLayer(circleLayer)&&map.removeLayer(circleLayer),circleLayer=L.featureGroup(),markerOptions.icon=L.icon(markerImage),L.marker(markerCenter,markerOptions).addTo(map),placeCircle=L.circle(markerCenter,parseInt(place_radius,10)).addTo(circleLayer),map.addLayer(circleLayer),map.fitBounds(placeCircle.getBounds())}}function wpestate_makeSafeForCSS(name){return name.replace(/[^a-z0-9]/g,(function(s){var c=s.charCodeAt(0);return 32==c?"-":c>=65&&c<=90?s.toLowerCase():("000"+c.toString(16)).slice(-4)}))}